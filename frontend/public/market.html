<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KISAAN : Indian Agricultural Commodity Analytics</title>
    <!-- Bootstrap 5 CSS via CDN for responsive styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Custom CSS for a modern, sleek look. -->
    <style>
        body {
            background-color: #f0f2f5; /* A light, modern background color */
            font-family: 'Inter', sans-serif;
        }
        
        /* Navbar styling */
        .navbar-custom {
            background-color: #0d1a2f !important; /* A deep blue for the header */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
            color: #ffffff !important;
        }

        /* Card styling for dashboard panels */
        .card-custom {
            background-color: #ffffff;
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            height: 100%; /* Ensure all cards have the same height */
        }
        
        .card-custom:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }

        /* Styling for the main content section */
        .main-content {
            padding-top: 20px;
            padding-bottom: 20px;
        }
        
        /* Styling for the commodity prices */
        .price {
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .change {
            font-size: 1rem;
            font-weight: 500;
        }
        
        .positive {
            color: #28a745; /* Green for positive change */
        }
        
        .negative {
            color: #dc3545; /* Red for negative change */
        }
        
        /* Footer styling */
        .footer {
            background-color: #0d1a2f;
            color: #a0a0a0;
            padding: 20px 0;
            text-align: center;
            margin-top: 50px;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
        }

        /* Placeholder image styling */
        .img-placeholder {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }
        
        /* Chart buttons styling */
        .chart-buttons .btn-custom {
            background-color: #e9ecef;
            border-radius: 10px;
            color: #495057;
            font-weight: 500;
            transition: background-color 0.2s ease, transform 0.2s ease;
        }
        
        .chart-buttons .btn-custom:hover {
            background-color: #cfd8dc;
            transform: translateY(-2px);
        }

        .chart-buttons .btn-custom.active {
            background-color: #0d1a2f;
            color: #ffffff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Indian Agricultural Analytics</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Reports</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content and Dashboard -->
    <main class="container-fluid main-content">
        <header class="text-center my-5">
            <h1 class="display-4 fw-bold">KISAAN : Agricultural Market Overview</h1>
            <p class="lead text-muted">Real-time price aggregation and analytics for key agricultural commodities in India.</p>
        </header>

        <!-- Commodity Price Cards -->
        <div class="row g-4">
            <!-- Rice Card -->
            <div class="col-md-6 col-lg-3">
                <div class="card card-custom">
                    <div class="card-body">
                        <h5 class="card-title text-muted">Rice</h5>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="price text-primary" id="rice-price">₹3,850</span>
                            <span class="change positive" id="rice-change">+0.5%</span>
                        </div>
                        <p class="card-text"><small class="text-muted">per quintal</small></p>
                    </div>
                </div>
            </div>

            <!-- Wheat Card -->
            <div class="col-md-6 col-lg-3">
                <div class="card card-custom">
                    <div class="card-body">
                        <h5 class="card-title text-muted">Wheat</h5>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="price text-success" id="wheat-price">₹2,500</span>
                            <span class="change negative" id="wheat-change">-0.8%</span>
                        </div>
                        <p class="card-text"><small class="text-muted">per quintal</small></p>
                    </div>
                </div>
            </div>
            
            <!-- Jowar Card -->
            <div class="col-md-6 col-lg-3">
                <div class="card card-custom">
                    <div class="card-body">
                        <h5 class="card-title text-muted">Jowar</h5>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="price text-info" id="jowar-price">₹3,050</span>
                            <span class="change positive" id="jowar-change">+1.2%</span>
                        </div>
                        <p class="card-text"><small class="text-muted">per quintal</small></p>
                    </div>
                </div>
            </div>

            <!-- Ragi Card -->
            <div class="col-md-6 col-lg-3">
                <div class="card card-custom">
                    <div class="card-body">
                        <h5 class="card-title text-muted">Ragi</h5>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="price text-warning" id="ragi-price">₹4,200</span>
                            <span class="change negative" id="ragi-change">-0.3%</span>
                        </div>
                        <p class="card-text"><small class="text-muted">per quintal</small></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section for Charts and Tables -->
        <div class="row mt-5">
            <div class="col-lg-8">
                <div class="card card-custom">
                    <div class="card-header bg-secondary text-white fw-bold">
                        Historical Price Chart
                    </div>
                    <div class="card-body p-4">
                        <!-- Chart selection buttons -->
                        <div class="d-flex justify-content-center gap-2 mb-4 chart-buttons">
                            <button class="btn btn-custom active" data-commodity="wheat">Wheat</button>
                            <button class="btn btn-custom" data-commodity="rice">Rice</button>
                            <button class="btn btn-custom" data-commodity="jowar">Jowar</button>
                            <button class="btn btn-custom" data-commodity="ragi">Ragi</button>
                        </div>
                        <!-- Chart.js will render the chart here -->
                        <canvas id="priceChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card card-custom">
                    <div class="card-header bg-secondary text-white fw-bold">
                        Trending Commodities
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Rice <span class="badge bg-success rounded-pill" id="trending-rice-change">+0.5%</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Jowar <span class="badge bg-success rounded-pill" id="trending-jowar-change">+1.2%</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Wheat <span class="badge bg-danger rounded-pill" id="trending-wheat-change">-0.8%</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Ragi <span class="badge bg-danger rounded-pill" id="trending-ragi-change">-0.3%</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2024 Indian Agricultural Analytics. All rights reserved.</p>
    </footer>

    <!-- Bootstrap 5 JS Bundle with Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Chart.js CDN for charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>

    <!-- Custom JavaScript for dynamic content. -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log("Indian Agricultural Dashboard script loaded. Ready for action!");

            let myChart = null; // Variable to hold the chart instance

            // Example historical data for all commodities
            const historicalData = {
                wheat: {
                    label: 'Wheat Price in ₹/quintal',
                    data: [2450, 2480, 2550, 2520, 2500, 2530],
                    borderColor: '#007bff',
                    backgroundColor: 'rgba(0, 123, 255, 0.1)'
                },
                rice: {
                    label: 'Rice Price in ₹/quintal',
                    data: [3800, 3750, 3820, 3900, 3850, 3880],
                    borderColor: '#17a2b8',
                    backgroundColor: 'rgba(23, 162, 184, 0.1)'
                },
                jowar: {
                    label: 'Jowar Price in ₹/quintal',
                    data: [3000, 3100, 3050, 2980, 3080, 3150],
                    borderColor: '#ffc107',
                    backgroundColor: 'rgba(255, 193, 7, 0.1)'
                },
                ragi: {
                    label: 'Ragi Price in ₹/quintal',
                    data: [4100, 4250, 4200, 4150, 4300, 4250],
                    borderColor: '#dc3545',
                    backgroundColor: 'rgba(220, 53, 69, 0.1)'
                }
            };
            
            // Example data simulation for real-time updates.
            function updateCommodityPrices() {
                const commodities = [
                    { id: 'rice', price: 3850, change: 0.5, unit: 'quintal' },
                    { id: 'wheat', price: 2500, change: -0.8, unit: 'quintal' },
                    { id: 'jowar', price: 3050, change: 1.2, unit: 'quintal' },
                    { id: 'ragi', price: 4200, change: -0.3, unit: 'quintal' }
                ];

                commodities.forEach(commodity => {
                    // Generate a new random price and change for simulation
                    const newChange = (Math.random() * 2 - 1) * 2; // Random change between -2 and +2
                    const newPrice = commodity.price * (1 + newChange / 100);

                    // Update the price text
                    const priceElement = document.getElementById(`${commodity.id}-price`);
                    priceElement.textContent = `₹${newPrice.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`; // Format with Indian number system comma
                    
                    // Update the change percentage text and color
                    const changeElement = document.getElementById(`${commodity.id}-change`);
                    changeElement.textContent = `${newChange.toFixed(1)}%`;
                    changeElement.className = `change ${newChange >= 0 ? 'positive' : 'negative'}`;

                    // Also update the trending list
                    const trendingChangeElement = document.getElementById(`trending-${commodity.id}-change`);
                    trendingChangeElement.textContent = `${newChange.toFixed(1)}%`;
                    trendingChangeElement.className = `badge rounded-pill ${newChange >= 0 ? 'bg-success' : 'bg-danger'}`;
                });
            }

            // Function to render the chart using Chart.js
            function renderChart(commodityId = 'wheat') {
                if (myChart) {
                    myChart.destroy(); // Destroy the previous chart instance
                }

                const ctx = document.getElementById('priceChart').getContext('2d');
                const data = historicalData[commodityId];
                
                myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: data.label,
                            data: data.data,
                            borderColor: data.borderColor,
                            backgroundColor: data.backgroundColor,
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            x: {
                                display: true,
                                title: {
                                    display: true,
                                    text: 'Month'
                                }
                            },
                            y: {
                                display: true,
                                title: {
                                    display: true,
                                    text: 'Price (₹)'
                                }
                            }
                        }
                    }
                });
            }

            // Add event listeners to the chart buttons
            document.querySelectorAll('.chart-buttons .btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    // Remove 'active' class from all buttons
                    document.querySelectorAll('.chart-buttons .btn').forEach(btn => btn.classList.remove('active'));
                    // Add 'active' class to the clicked button
                    event.target.classList.add('active');
                    // Get the commodity ID and render the chart
                    const commodityId = event.target.getAttribute('data-commodity');
                    renderChart(commodityId);
                });
            });

            // Initial calls
            updateCommodityPrices();
            renderChart('wheat'); // Render the Wheat chart by default

            // Set an interval to update the prices every 5 seconds (for simulation)
            // setInterval(updateCommodityPrices, 5000);
        });
    </script>
</body>
</html>